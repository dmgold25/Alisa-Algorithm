<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Name Selector</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        input, button {
            padding: 10px;
            margin: 5px 0;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Name Selector</h1>
        <div>
            <input type="text" id="name-input" placeholder="Enter name">
            <button id="add-name-button">Add Name</button>
        </div>
        
        <h2>Names List</h2>
        <ul id="names-list"></ul>
        
        <div>
            <input type="text" id="delete-name-input" placeholder="Enter name to delete">
            <button id="delete-name-button">Delete Name</button>
        </div>

        <button id="select-name-button">Select Name</button>

        <h2>Selected Name</h2>
        <p id="selected-name"></p>

        <h2>Selection Counts</h2>
        <ul id="counts-list"></ul>

        <button id="reset-button">Reset All</button>
    </div>

    <script>
        function updateNamesList(names) {
            const namesList = $("#names-list");
            namesList.empty();
            names.forEach(name => {
                namesList.append(`<li>${name}</li>`);
            });
        }

        function updateCountsList(counts) {
            const countsList = $("#counts-list");
            countsList.empty();
            for (const [name, count] of Object.entries(counts)) {
                countsList.append(`<li>${name}: ${count} times</li>`);
            }
        }

        $(document).ready(function () {
            // Add a name
            $("#add-name-button").click(function () {
                const name = $("#name-input").val();
                if (name) {
                    $.post("/add_name", { name: name }, function (response) {
                        if (response.success) {
                            updateNamesList(response.names);
                            $("#name-input").val("");
                        }
                    });
                }
            });

            // Delete a name
            $("#delete-name-button").click(function () {
                const nameToDelete = $("#delete-name-input").val();
                if (nameToDelete) {
                    $.post("/delete_name", { delete_name: nameToDelete }, function (response) {
                        if (response.success) {
                            updateNamesList(response.names);
                            updateCountsList(response.counts);
                            $("#delete-name-input").val("");  // Clear input after deletion
                        }
                    });
                }
            });

            // Select a name
            $("#select-name-button").click(function () {
                $.post("/select_name", {}, function (response) {
                    if (response.success) {
                        $("#selected-name").text(response.selected_name);
                        updateCountsList(response.counts);
                    } else {
                        alert(response.error);
                    }
                });
            });

            // Reset all names and counts
            $("#reset-button").click(function () {
                $.post("/reset", {}, function (response) {
                    if (response.success) {
                        updateNamesList(response.names);
                        updateCountsList(response.counts);
                    }
                });
            });

            // Load counts on page load
            $.get("/get_counts", function (counts) {
                updateCountsList(counts);
            });
        });
    </script>
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Name Selector</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        input, button {
            padding: 10px;
            margin: 5px 0;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 5px 0;
        }
        .tab {
            cursor: pointer;
            display: inline-block;
            padding: 10px;
            background-color: #f1f1f1;
            margin-right: 10px;
            border: 1px solid #ccc;
        }
        .tab.active {
            background-color: #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Name Selector</h1>

        <!-- Tabs for class selection -->
        <div id="class-tabs">
            <!-- Dynamic tabs for each class will be injected here -->
        </div>

        <!-- Create/Delete Class Section -->
        <input type="text" id="create-class-input" placeholder="Enter class name">
        <button id="create-class-button">Create Class</button>
        <button id="delete-class-button">Delete Selected Class</button>

        <div>
            <input type="text" id="name-input" placeholder="Enter name">
            <button id="add-name-button">Add Name</button>
        </div>

        <h2>Names List</h2>
        <ul id="names-list"></ul>
        <button id="select-name-button">Select Name</button>
        <button id="reset-button">Reset</button>
        <button id="delete-name-button">Delete Name</button>
        <h2>Selected Name</h2>
        <p id="selected-name"></p>
        <h2>Selection Counts</h2>
        <ul id="counts-list"></ul>
    </div>

    <script>
        let selectedClass = "{{ class_names[0] }}"; // Default to the first class

        // Update the UI based on the selected class
        function updateNamesList(names) {
            const namesList = $("#names-list");
            namesList.empty();
            names.forEach(name => {
                namesList.append(`<li>${name}</li>`);
            });
        }

        function updateCountsList(counts) {
            const countsList = $("#counts-list");
            countsList.empty();
            for (const [name, count] of Object.entries(counts)) {
                countsList.append(`<li>${name}: ${count} times</li>`);
            }
        }

        // Switch to a different class
        function updateClassTabs(classNames) {
            const classTabs = $("#class-tabs");
            classTabs.empty();
            classNames.forEach(className => {
                const tab = $(`<div class="tab" data-class="${className}">${className}</div>`);
                tab.click(function () {
                    selectedClass = className;
                    $(".tab").removeClass("active");
                    $(this).addClass("active");
                    loadClassData();
                });
                classTabs.append(tab);
            });
            // Set the first tab as active by default
            $(".tab").first().addClass("active");
        }

        // Load the data for the selected class
        function loadClassData() {
            $.get(`/get_counts?class_name=${selectedClass}`, function (counts) {
                updateCountsList(counts);
                updateNamesList(counts); // Assuming names and counts are linked
            });
        }

        $(document).ready(function () {
            // Create a new class
            $("#create-class-button").click(function () {
                const className = $("#create-class-input").val();
                if (className) {
                    $.post("/create_class", { class_name: className }, function (response) {
                        if (response.success) {
                            updateClassTabs(response.class_names);
                            $("#create-class-input").val("");
                        }
                    });
                }
            });

            // Delete the selected class
            $("#delete-class-button").click(function () {
                $.post("/delete_class", { class_name: selectedClass }, function (response) {
                    if (response.success) {
                        updateClassTabs(response.class_names);
                        loadClassData();
                    }
                });
            });

            // Add a name to the selected class
            $("#add-name-button").click(function () {
                const name = $("#name-input").val();
                if (name) {
                    $.post("/add_name", { class_name: selectedClass, name: name }, function (response) {
                        if (response.success) {
                            updateNamesList(response.names);
                            $("#name-input").val("");
                        }
                    });
                }
            });

            // Delete a name from the selected class
            $("#delete-name-button").click(function () {
                const name = $("#name-input").val();
                if (name) {
                    $.post("/delete_name", { class_name: selectedClass, name: name }, function (response) {
                        if (response.success) {
                            updateNamesList(response.names);
                            $("#name-input").val("");
                        }
                    });
                }
            });

            // Select a name from the selected class
            $("#select-name-button").click(function () {
                $.post("/select_name", { class_name: selectedClass }, function (response) {
                    if (response.success) {
                        $("#selected-name").text(response.selected_name);
                        updateCountsList(response.counts);
                    } else {
                        alert(response.error);
                    }
                });
            });

            // Reset the selected class
            $("#reset-button").click(function () {
                $.post("/reset", { class_name: selectedClass }, function (response) {
                    if (response.success) {
                        loadClassData();
                    }
                });
            });

            // Load initial class data
            $.get("/get_counts", { class_name: selectedClass }, function (counts) {
                updateCountsList(counts);
            });
        });
    </script>
</body>
</html>
